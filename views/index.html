<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Music</title>
  <style>
    .music-box {
      width: 700px;
      margin:100px auto;
    }
    .music-box table{
      width:100%;
      text-align: center;
    }
    .music-box .add-btn {
      float:right;
      padding: 10px 0;
    }
  </style>
</head>
<body>
  <div class="music-box">
    index page
    <hr>
    <a class='add-btn' href="/add">click here to add a song</a>
    <table>
        <thead>
        <th>Number</th>
        <th>Song</th>
        <th>Singer</th>
        <th>High</th>
        <th>Operation</th>
        </thead>
        <tbody>
        <% musicList.forEach(function(item){ %>
        <tr>
          <td><%= item.id %></td>
          <td><%= item.name %></td>
          <td><%= item.singer %></td>
          <td>
            <% if(item.isHightRate){%>
            <input disabled type="radio" checked>Yes
            <input disabled type="radio">No
            <%}else{%>
            <input disabled type="radio">Yes
            <input disabled type="radio" checked>No
            <%} %>
          </td>
          <td>
            <a href="/edit/<%= item.id %>">edit</a>
            <a href="JavaScript:remove('/remove/<%= item.id %>')">delete</a>
          </td>
        </tr>
        <%}); %>
        </tbody>
      </table>
  </div>
</body>
</html>
<script src="/assets/lib/vender/jquery/dist/jquery.js"></script>
<script>
  function remove(url) {
    if (!confirm('Really to deleteï¼Ÿ')) {
      return;
    }
    $.ajax({
      url: url,
      type: 'GET',
      success: function (data) {
        {
          var jsonObj = JSON.parse(data);
          if (jsonObj.code == '1') {
            window.location.reload('/');
          } else if (jsonObj.code == '0') {
            alert('delete fail');
          }
        }
      }
    });
  }
</script>